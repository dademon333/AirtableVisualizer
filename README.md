# Core Vision

### Cервис для визуализации образовательной программы в виде графа

<p align="center">
    <a href="https://github.com/dademon333/CoreVision/actions/workflows/tests.yaml" target="_blank">
        <img src="https://github.com/dademon333/CoreVision/actions/workflows/tests.yaml/badge.svg" alt="Tests">
    </a>
    <a href="https://codecov.io/gh/dademon333/CoreVision" target="_blank">
        <img src="https://codecov.io/gh/dademon333/CoreVision/branch/master/graph/badge.svg?token=23HZLHIQU5"/> 
    </a>
    <a href="https://www.python.org/downloads/release/python-3110/" target="_blank">
        <img src="https://img.shields.io/badge/python-3.11-blue.svg" alt="Supported Python versions">
    </a>
</p>

---

## Немного описания
В эпоху бесчисленных онлайн курсов и широчайших возможностей дистанционного образования
на первый план выходит не доступ к информации как таковой, а эффективный поиск и организация ее усвоения.

В связи с этим хочется особенно выделить две проблемы:  
Во-первых, частое отсутствие цели - изучая предмет в вузе, студенты не видят связи между ним и компетенциями,
котирующимися на рынке труда. А иногда не видят и связи между разделами самого предмета.
С другой стороны, специалисты, повышающие свою квалификацию или меняющие профессию,
хорошо представляют требования рынка, но испытывают трудности с построением образовательного плана и выбора курсов.

При этом точные науки, изучаемые в рамках университетской программы, имеют четкую внутреннюю структуру и взаимосвязи,
но, из-за ограниченности традиционного формата и подходов, этот аспект остается недоступен большинству слушателей.  
Мы создаем образовательную платформу, сердцем которой будет граф знаний, отражающий взаимосвязи между разделами дисциплин.
Наша основная цель - помощь в построении индивидуальной образовательной траектории. Траектория, в нашем понимании, - 
это последовательность узлов графа, на каждом из которых расположены конкретные тематические учебные материалы.


## Техническая часть
## Режим разработки
Пишем `docker-compose -f docker-compose.dev.yaml up` и радуемся жизни  
Ну и миграции алембика можно накатить: `cd backend && alembic upgrade head`

## Deploy
Весь проект обмазан контейнерами (даже сборка фронтенда), поэтому деплой максимально прост

### Без CI/CD:
1. Настраиваем переменные окружения:  
  В корне проекта (рядом с docker-compose.yaml) создаем файл .env и заполняем его следующими значениями:
  * `POSTGRESQL_USER` - имя пользователя postgres
  * `POSTGRESQL_HOST` - хост postgres
  * `POSTGRESQL_PORT` - порт postgres
  * `POSTGRESQL_PASSWORD` - пароль от postgres
  * `POSTGRESQL_DATABASE` - имя бд postgres

  * `REDIS_HOST` - хост redis
  * `APP_REPLICAS` - количество application контейнеров (вертикальное масштабирование)

2. Устанавливаем docker, docker-compose, python (желательно 3.11), с помощью pip прикручиваем alembic
3. Собираем образы и запускаем postgres:  
`docker-compose build && docker-compose up -d postgres`
4. Переходим в папку backend и загружаем чистую базу данных из миграций:  
`cd backend && alembic upgrade head`  
(ну или из дампа, если имеется)
5. Возвращаемся в корневой каталог и запускаем все остальные сервисы:  
`docker-compose up -d`

### С CI/CD
В проекте настроен Github Actions, нужно лишь прописать пару конфигов:

1. Выполняем все шаги `Без CI/CD`
2. Идем в настройки репозитория -> Security -> Secrets -> Actions
3. Указываем следующие переменные:
  * `ALEMBIC_PATH` - абсолютный путь к исполнимому файлу alembic (например, `/root/.pyenv/shims/alembic`)
  * `POSTGRESQL_PASSWORD` - пароль от бд
  * `POSTGRESQL_USER` - имя пользователя от бд
  * `PROJECT_DIR` - абсолютный путь к папке на сервере (например, `/home/user/CoreVision`)
  * `SERVER_HOST` - адрес сервера
  * `SERVER_PASSWORD` - пароль от пользователя на сервере
  * `SERVER_USERNAME` - имя пользователя на сервере

4. Когда нужно задеплоиться - идём в actions -> deploy -> run workflow

Всё. ¯\\_(ツ)_/¯